import{c as Q,d as G,e as J,h as W,f as X,u as j,i as E,_ as H,C as Y,g as A}from"./C_uT0_lT.js";import{a as y,s as x,t as ee,P as ae,y as te,b as se,B as U,u as oe,g as ne,A as le,k as re,ao as B,r as ie,a3 as T,a6 as O,a5 as L,ab as D,_ as M,a1 as P,ai as F,z as c,a9 as m,aa as g,al as R,am as Z,j as de,a8 as ue,a0 as I,ap as V}from"./BflsbNFv.js";const ce=e=>e==="defer"||e===!1;function me(...e){var l;const a=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(a);let[s,r,o={}]=e;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const t=G(),i=r,p=()=>null,w=()=>t.isHydrating?t.payload.data[s]:t.static.data[s];o.server=o.server??!0,o.default=o.default??p,o.getCachedData=o.getCachedData??w,o.lazy=o.lazy??!1,o.immediate=o.immediate??!0,o.deep=o.deep??Q.deep,o.dedupe=o.dedupe??"cancel";const d=()=>o.getCachedData(s,t)!=null;if(!t._asyncData[s]||!o.immediate){(l=t.payload._errors)[s]??(l[s]=null);const h=o.deep?y:x;t._asyncData[s]={data:h(o.getCachedData(s,t)??o.default()),pending:y(!d()),error:ee(t.payload._errors,s),status:y("idle")}}const n={...t._asyncData[s]};n.refresh=n.execute=(h={})=>{if(t._asyncDataPromises[s]){if(ce(h.dedupe??o.dedupe))return t._asyncDataPromises[s];t._asyncDataPromises[s].cancelled=!0}if((h._initial||t.isHydrating&&h._initial!==!1)&&d())return Promise.resolve(o.getCachedData(s,t));n.pending.value=!0,n.status.value="pending";const C=new Promise((k,u)=>{try{k(i(t))}catch(b){u(b)}}).then(async k=>{if(C.cancelled)return t._asyncDataPromises[s];let u=k;o.transform&&(u=await o.transform(k)),o.pick&&(u=pe(u,o.pick)),t.payload.data[s]=u,n.data.value=u,n.error.value=null,n.status.value="success"}).catch(k=>{if(C.cancelled)return t._asyncDataPromises[s];n.error.value=J(k),n.data.value=oe(o.default()),n.status.value="error"}).finally(()=>{C.cancelled||(n.pending.value=!1,delete t._asyncDataPromises[s])});return t._asyncDataPromises[s]=C,t._asyncDataPromises[s]},n.clear=()=>fe(t,s);const _=()=>n.refresh({_initial:!0}),v=o.server!==!1&&t.payload.serverRendered;{const h=ne();if(h&&!h._nuxtOnBeforeMountCbs){h._nuxtOnBeforeMountCbs=[];const u=h._nuxtOnBeforeMountCbs;ae(()=>{u.forEach(b=>{b()}),u.splice(0,u.length)}),te(()=>u.splice(0,u.length))}v&&t.isHydrating&&(n.error.value||d())?(n.pending.value=!1,n.status.value=n.error.value?"error":"success"):h&&(t.payload.serverRendered&&t.isHydrating||o.lazy)&&o.immediate?h._nuxtOnBeforeMountCbs.push(_):o.immediate&&_();const C=le();if(o.watch){const u=se(o.watch,()=>n.refresh());C&&U(u)}const k=t.hook("app:data:refresh",async u=>{(!u||u.includes(s))&&await n.refresh()});C&&U(k)}const q=Promise.resolve(t._asyncDataPromises[s]).then(()=>n);return Object.assign(q,n),q}function fe(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=null),e._asyncData[a]&&(e._asyncData[a].data.value=void 0,e._asyncData[a].error.value=null,e._asyncData[a].pending.value=!1,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a].cancelled=!0,e._asyncDataPromises[a]=void 0)}function pe(e,a){const s={};for(const r of a)s[r]=e[r];return s}function N(e,a,s){const[r={},o]=typeof a=="string"?[{},a]:[a,s],t=re(()=>B(e)),i=r.key||W([o,typeof t.value=="string"?t.value:"",...ve(r)]);if(!i||typeof i!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+i);if(!e)throw new Error("[nuxt] [useFetch] request is missing.");const p=i===o?"$f"+i:i;if(!r.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:w,lazy:d,default:n,transform:_,pick:v,watch:q,immediate:l,getCachedData:h,deep:C,dedupe:k,...u}=r,b=ie({...X,...u,cache:typeof r.cache=="boolean"?void 0:r.cache}),$={server:w,lazy:d,default:n,transform:_,pick:v,immediate:l,getCachedData:h,deep:C,dedupe:k,watch:q===!1?[]:[b,t,...q||[]]};let f;return me(p,()=>{var z;(z=f==null?void 0:f.abort)==null||z.call(f),f=typeof AbortController<"u"?new AbortController:{};const S=B(r.timeout);return S&&setTimeout(()=>f.abort(),S),(r.$fetch||globalThis.$fetch)(t.value,{signal:f.signal,...b})},$)}function ve(e){var s;const a=[((s=B(e.method))==null?void 0:s.toUpperCase())||"GET",B(e.baseURL)];for(const r of[e.params||e.query]){const o=B(r);if(!o)continue;const t={};for(const[i,p]of Object.entries(o))t[B(i)]=B(p);a.push(t)}return a}const he={name:"Alert",props:{alert:{type:Object,default:void 0}},setup(){const e=j();return{mobile:E(e)}}},be=e=>(R("data-v-9b293880"),e=e(),Z(),e),ge={key:0,class:"alert-container"},ye={class:"mx-2"},De=be(()=>D("br",null,null,-1)),we={key:0,class:"info-text"};function ke(e,a,s,r,o,t){const i=T("v-icon"),p=T("v-btn");return s.alert?(O(),L("div",ge,[D("div",{class:g(["alert elevation-10 d-flex align-center",s.alert.type])},[D("span",ye,[M(P(s.alert.msg),1),De,s.alert.info?(O(),L("span",we,P(s.alert.info),1)):F("",!0)]),c(p,{class:"ml-4",icon:"",variant:"text",onClick:a[0]||(a[0]=w=>e.$emit("close"))},{default:m(()=>[c(i,{color:"white",size:r.mobile?"x-large":""},{default:m(()=>[M("mdi-close")]),_:1},8,["size"])]),_:1})],2)])):F("",!0)}const _e=H(he,[["render",ke],["__scopeId","data-v-9b293880"]]),Ce=de({name:"ContactForm",components:{ClassicButton:Y,Alert:_e},props:{backgrounded:{type:Boolean,default:!1}},setup(){const e=y(void 0),a=y(void 0),s=y(void 0),r=y(void 0),o=y(void 0),t=y(void 0),i=y(void 0),p=j(),w=E(p),{t:d}=A(),n=y(!1),_=y(!1),v=y(void 0),q=()=>{e.value=void 0,a.value=void 0,s.value=void 0,r.value=void 0,o.value=void 0,t.value=void 0,i.value=void 0},l=(b,$)=>{N("https://lbmapi.fr/api/sendcontact",{method:"POST",headers:{"Content-Type":"application/json"},body:{status:b,errors:$,name:e.value,email:a.value,phone:s.value,eventtype:r.value,guests:o.value,eventdate:t.value,message:i.value}},"$Q6Bk92EN6B")};return{name:e,email:a,phoneNumber:s,eventType:r,guests:o,eventDate:t,message:i,mobile:w,submitForm:()=>{_.value=!0;try{N("https://formie.io/form/22a5feaf-891c-4c89-a6f1-f72cf6f06cbd",{method:"POST",headers:{"Content-Type":"application/json"},body:{name:e.value,email:a.value,phone:s.value,eventtype:r.value,guests:o.value,eventdate:t.value,message:i.value}},"$QySKacQNfh").then($=>{if($.status.value=="success")l("success"),v.value={msg:d("alerts.form.success"),type:"success"},q();else if($.error.value.data){const f=$.error.value.data.errors;l("error",f),f.email?v.value={msg:d("alerts.form.error.general"),info:d(f.email[0]),type:"error"}:f.name?v.value={msg:d("alerts.form.error.general"),info:d(f.name[0]),type:"error"}:f.message?v.value={msg:d("alerts.form.error.general"),info:d(f.message[0]),type:"error"}:v.value={msg:d("alerts.form.error.general"),info:d("alerts.form.error.basicInfo"),type:"error"}}else v.value={msg:d("alerts.form.error.general"),info:d("alerts.form.error.basicInfo"),type:"error"};_.value=!1,setTimeout(()=>{v.value=void 0},8e3)})}catch{l("error","catch"),v.value={msg:d("alerts.form.error.general"),info:d("alerts.form.error.basicInfo"),type:"error"}}},rules:{required:[b=>!!b||"champs requis"],email:[b=>/.+@.+\..+/.test(b)||!b||"invalid email format"]},form:n,loading:_,alert:v}}}),K=e=>(R("data-v-b3edc036"),e=e(),Z(),e),Te={style:{display:"inline-block"}},qe={style:{display:"inline-block"}},$e={style:{display:"inline-block"}},Ve=K(()=>D("svg",{height:"20",viewBox:"0 -960 960 960",width:"20"},[D("path",{d:"M720-400v-120H600v-80h120v-120h80v120h120v80H800v120h-80Zm-360-80q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Z"})],-1)),Be=K(()=>D("svg",{height:"20",viewBox:"0 -960 960 960",width:"20"},[D("path",{d:"M320-520q17 0 28.5-11.5T360-560q0-17-11.5-28.5T320-600q-17 0-28.5 11.5T280-560q0 17 11.5 28.5T320-520Zm160 0q17 0 28.5-11.5T520-560q0-17-11.5-28.5T480-600q-17 0-28.5 11.5T440-560q0 17 11.5 28.5T480-520Zm160 0q17 0 28.5-11.5T680-560q0-17-11.5-28.5T640-600q-17 0-28.5 11.5T600-560q0 17 11.5 28.5T640-520ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Z"})],-1)),Me={class:"submit-container"};function Pe(e,a,s,r,o,t){const i=T("v-sheet"),p=T("v-icon"),w=T("v-text-field"),d=T("v-select"),n=T("v-textarea"),_=T("ClassicButton"),v=T("v-form"),q=T("Alert");return O(),ue(i,{class:g(["d-flex justify-center",e.mobile?"flex-column align-center":""])},{default:m(()=>[c(i,{width:e.mobile?"90%":"","max-width":e.mobile?"350px":"355px",class:g(["mt-8 d-flex flex-column",e.mobile?"align-start":"align-end mr-5"])},{default:m(()=>[D("h2",{class:g(["pa-1 line-spaced",[e.backgrounded?"backgrounded":"",e.mobile?"small line-spaced text-left":"medium text-right"]])},[D("span",Te,P(e.$t("contact.title.line1")),1),D("span",qe,P(e.$t("contact.title.line2")),1),D("span",$e,P(e.$t("contact.title.line3")),1)],2),D("p",{class:g(["classic-text pa-1 mt-4",[e.backgrounded?"backgrounded":"",e.mobile?"text-left break-max":"text-right"]])},P(e.$t("contact.text")),3)]),_:1},8,["width","max-width","class"]),c(i,{width:e.mobile?"90%":"300px","max-width":e.mobile?"350px":"","min-width":"250px",class:"Montserrat--text text--text font-weight-bold mt-6"},{default:m(()=>[c(v,{onSubmit:a[7]||(a[7]=I(()=>{},["prevent"])),modelValue:e.form,"onUpdate:modelValue":a[8]||(a[8]=l=>e.form=l)},{default:m(()=>[c(w,{"hide-details":"",maxlength:"40",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",rules:[e.rules.required[0]],modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=l=>e.name=l),autocomplete:"LBM",label:e.$t("contact.form.name")+" *"},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[c(p,{size:"20"},{default:m(()=>[M("mdi-account")]),_:1})]),key:"0"}]),1032,["class","rules","modelValue","label"]),c(w,{"hide-details":"",maxlength:"40",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",rules:[e.rules.required[0],e.rules.email[0]],modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=l=>e.email=l),autocomplete:"LBM",label:e.$t("contact.form.email")+" *"},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[c(p,{size:"20"},{default:m(()=>[M("mdi-email")]),_:1})]),key:"0"}]),1032,["class","rules","modelValue","label"]),c(w,{"hide-details":"",maxlength:"40",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",modelValue:e.phoneNumber,"onUpdate:modelValue":a[2]||(a[2]=l=>e.phoneNumber=l),autocomplete:"LBM",label:e.$t("contact.form.phone")},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[c(p,{size:"20"},{default:m(()=>[M("mdi-phone")]),_:1})]),key:"0"}]),1032,["class","modelValue","label"]),c(w,{"hide-details":"",maxlength:"40",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",modelValue:e.eventType,"onUpdate:modelValue":a[3]||(a[3]=l=>e.eventType=l),autocomplete:"LBM",label:e.$t("contact.form.eventType")},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[c(p,{size:"20"},{default:m(()=>[M("mdi-star")]),_:1})]),key:"0"}]),1032,["class","modelValue","label"]),c(d,{"hide-details":"",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",autocomplete:"LBM",modelValue:e.guests,"onUpdate:modelValue":a[4]||(a[4]=l=>e.guests=l),label:e.$t("contact.form.guests"),items:["50 - 150","150 - 300","300 - 500","500 +"]},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[Ve]),key:"0"}]),1032,["class","modelValue","label"]),c(w,{"hide-details":"",maxlength:"50",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",modelValue:e.eventDate,"onUpdate:modelValue":a[5]||(a[5]=l=>e.eventDate=l),autocomplete:"LBM",placeholder:e.$t("contact.form.dateplaceholder"),label:e.$t("contact.form.date")},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[c(p,{size:"20"},{default:m(()=>[M("mdi-calendar-month")]),_:1})]),key:"0"}]),1032,["class","modelValue","placeholder","label"]),c(n,{"hide-details":"",maxlength:"400",class:g([e.backgrounded?"backgrounded":"","px-1"]),variant:"underlined",rules:[e.rules.required[0]],autocomplete:"LBM",modelValue:e.message,"onUpdate:modelValue":a[6]||(a[6]=l=>e.message=l),label:e.$t("contact.form.message")+" *","no-resize":"",rows:"2"},V({_:2},[e.mobile?void 0:{name:"prepend-inner",fn:m(()=>[Be]),key:"0"}]),1032,["class","rules","modelValue","label"]),D("div",Me,[c(_,{text:e.$t("contact.form.submit"),class:g([e.backgrounded?"backgrounded":"",e.mobile?"mt-10":"mt-5"]),bold:"",disabled:e.loading||!e.form,loading:e.loading,onClick:I(e.submitForm,["stop"])},null,8,["text","class","disabled","loading","onClick"])])]),_:1},8,["modelValue"])]),_:1},8,["width","max-width"]),c(q,{alert:e.alert,onClose:a[9]||(a[9]=l=>e.alert=void 0)},null,8,["alert"])]),_:1},8,["class"])}const Le=H(Ce,[["render",Pe],["__scopeId","data-v-b3edc036"]]);export{Le as C};
